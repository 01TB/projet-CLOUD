<!-- src/app/app.component.html -->
<div class="app-container" *ngIf="isAuthenticated$ | async; else loginView">
  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <h1 class="app-title">
        <span class="title-icon">ğŸ—ºï¸</span>
        SIG Signalements Routiers
      </h1>
      <span class="subtitle">Antananarivo, Madagascar</span>
    </div>

    <!-- Navigation Manager -->
    <nav class="header-nav" *ngIf="isManager$ | async">
      <a routerLink="/map" routerLinkActive="nav-active" class="nav-link">
        <span class="nav-icon">ğŸ—ºï¸</span> Carte
      </a>
      <a routerLink="/admin/users" routerLinkActive="nav-active" class="nav-link">
        <span class="nav-icon">ğŸ‘¥</span> Utilisateurs
      </a>
      <button class="nav-link nav-btn" (click)="onSync()" title="Synchroniser avec Firebase">
        <span class="nav-icon">ğŸ”„</span> Synchroniser
      </button>
    </nav>

    <div class="header-right">
      <div class="user-info">
        <span class="user-icon">ğŸ‘¤</span>
        <span class="user-email">{{ (currentUser$ | async)?.email }}</span>
        <span class="user-badge" [class.badge-manager]="(isManager$ | async)" 
                                  [class.badge-user]="(isUser$ | async)"
                                  [class.badge-visitor]="!(isManager$ | async) && !(isUser$ | async)">
          {{ (currentUser$ | async)?.role?.nom }}
        </span>
      </div>
      <button class="btn-logout" (click)="logout()">
        <span>ğŸšª</span> DÃ©connexion
      </button>
    </div>
  </header>

  <!-- Main content -->
  <main class="app-main">
    <!-- Sidebar pour les filtres -->
    <aside class="sidebar-container" *ngIf="showSidebar">
      <app-sidebar></app-sidebar>
    </aside>

    <!-- Content area -->
    <div class="content-area">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <span>Â© 2025 - SIG Signalements Routiers</span>
  </footer>
</div>

<ng-template #loginView>
  <router-outlet></router-outlet>
</ng-template>